import java.util.*;
import java.util.concurrent.*;

public class FishingGame {
    private static final List<String> fishList = Arrays.asList(
        "Flimsy Fish", "Training Fish", "Plastic Fish", "Carbon Fish", "Fast Fish",
        "Lucky Fish", "Long Fish", "Steady Fish", "Nocturnal Fish", "Fortune Fish"
    );
    private static final List<String> rods = Arrays.asList(
        "Flimsy Rod", "Training Rod", "Plastic Rod", "Carbon Rod", "Fast Rod"
    );
    private static final Map<String, Integer> inventory = new HashMap<>();
    private static int fishCredit = 550;
    private static int rodBoost = 10;
    
    static {üé£", 0
        for (String rod : rods) inventory.put(rod + ");
        for (String fish : fishList) inventory.put(fish + "üêü", 0);
    }

    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        while (true) {
            System.out.println("\n     MENUüìï     ");
            System.out.println("-----fish-----ü¶à");
            System.out.println("-----shop-----ü™ô");
            System.out.println("--inventory---üß∞");
            System.out.println("---settings---‚öôÔ∏è");
            System.out.print("Choose an option: ");
            String choice = scanner.nextLine().toLowerCase();

            switch (choice) {
                case "fish":
                    fishMenu(scanner);
                    break;
                case "shop":
                    shopMenu(scanner);
                    break;
                case "inventory":
                    System.out.println("Inventory: " + inventory);
                    System.out.println("Credit: " + fishCredit + "üí∞");
                    break;
                case "settings":
                    settingsMenu(scanner);
                    break;
                default:
                    System.out.println("Invalid option, try again.");
            }
        }
    }

    private static void fishMenu(Scanner scanner) {
        Random rand = new Random();
        System.out.println("Write the correct number within 1 second to catch a fish");
        int randomNum = rand.nextInt(10);
        System.out.println("Number: " + randomNum);
        
        ExecutorService executor = Executors.newSingleThreadExecutor();
        Future<String> future = executor.submit(scanner::nextLine);
        try {
            String input = future.get(1, TimeUnit.SECONDS);
            if (Integer.parseInt(input) == randomNum) {
                String caughtFish = fishList.get(rand.nextInt(fishList.size())) + "üêü";
                inventory.put(caughtFish, inventory.getOrDefault(caughtFish, 0) + 1);
                fishCredit += 100;
                System.out.println("You caught " + caughtFish);
            } else {
                System.out.println("You caught nothing‚ùå");
            }
        } catch (Exception e) {
            System.out.println("You caught nothing‚ùå");
        } finally {
            executor.shutdown();
        }
    }

    private static void shopMenu(Scanner scanner) {
        System.out.println("Available rods:");
        for (int i = 1; i < rods.size(); i++) {
            System.out.println(rods.get(i) + " - " + (i * 1250) + "üí∞");
        }
        System.out.println("Your credit: " + fishCredit + "üí∞");
        System.out.print("What would you like to buy? üé£ ");
        String buyItem = scanner.nextLine();

        int price = rods.indexOf(buyItem) * 1250;
        if (price > fishCredit || price <= 0) {
            System.out.println("You can't afford that item.");
        } else {
            System.out.println(buyItem + " bought!");
            fishCredit -= price;
            inventory.put(buyItem + "üé£", inventory.getOrDefault(buyItem + "üé£", 0) + 1);
            rodBoost = rods.indexOf(buyItem) + 11;
        }
    }

    private static void settingsMenu(Scanner scanner) {
        while (true) {
            System.out.println("Settings ‚öôÔ∏è");
            System.out.println("1. Directions üìú");
            System.out.println("2. Quit ‚ùå");
            System.out.print("Choose an option: ");
            String choice = scanner.nextLine();

            switch (choice) {
                case "1":
                    System.out.println("Catch fish, upgrade rods, earn credit!");
                    break;
                case "2":
                    return;
                default:
                    System.out.println("Invalid choice, try again.");
            }
        }
    }
}

